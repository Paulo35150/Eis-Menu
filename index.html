<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SANREMO - Sistema de Pedidos</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: #f5f5f5; padding: 20px; }
        
        /* CABEÇALHO */
        .header {
            background: linear-gradient(135deg, #2c3e50, #1a2530);
            color: white;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 10px 10px 0 0;
        }
        .logo { font-size: 28px; font-weight: bold; }
        .software { font-size: 14px; opacity: 0.8; }
        
        /* BANDEIRAS */
        .flags {
            display: flex;
            gap: 10px;
        }
        .flag {
            width: 30px;
            height: 22px;
            cursor: pointer;
            border: 2px solid transparent;
            border-radius: 3px;
        }
        .flag.active {
            border-color: white;
            box-shadow: 0 0 5px white;
        }
        
        /* MESA */
        .table-selector {
            background: white;
            padding: 20px;
            border-radius: 0 0 10px 10px;
            margin-bottom: 20px;
            text-align: center;
        }
        .tables {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }
        .table {
            width: 60px;
            height: 60px;
            border: 2px solid #3498db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            background: white;
        }
        .table.selected {
            background: #3498db;
            color: white;
        }
        .table.occupied {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        /* CATEGORIAS */
        .categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            overflow-x: auto;
            padding: 10px 0;
        }
        .category-tab {
            padding: 12px 20px;
            background: white;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            white-space: nowrap;
            font-weight: bold;
        }
        .category-tab.active {
            background: #2ecc71;
            color: white;
            border-color: #2ecc71;
        }
        
        /* PRODUTOS */
        .products {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .product {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .product-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #2c3e50;
        }
        .product-desc {
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }
        .product-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .price {
            font-weight: bold;
            color: #27ae60;
            font-size: 18px;
        }
        .add-btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
        }
        
        /* PEDIDO */
        .order-panel {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        .order-items {
            max-height: 200px;
            overflow-y: auto;
            margin: 15px 0;
            padding-right: 10px;
        }
        .order-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px dashed #ddd;
        }
        .item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .qty-btn {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            border: 1px solid #ddd;
            background: #f5f5f5;
            cursor: pointer;
        }
        
        /* BOTÕES */
        .buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }
        .btn {
            padding: 12px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .btn-save { background: #2ecc71; color: white; }
        .btn-print { background: #3498db; color: white; }
        .btn-whatsapp { background: #25D366; color: white; }
        .btn-clear { background: #e74c3c; color: white; }
        .btn-admin { background: #f39c12; color: white; }
        
        /* MODAL ADMIN */
        .modal {
            display: none;
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(0,0,0,0.5);
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
        }
        
        /* RESPONSIVO */
        @media (max-width: 768px) {
            .products { grid-template-columns: 1fr; }
            .buttons { grid-template-columns: 1fr; }
            .header { flex-direction: column; gap: 15px; }
        }
    </style>
</head>
<body>
    <!-- CABEÇALHO COM LOGO E BANDEIRAS -->
    <div class="header">
        <div>
            <div class="logo">SANREMO</div>
            <div class="software">SOFTWARE</div>
        </div>
        <div class="flags">
            <img src="https://flagcdn.com/w40/pt.png" class="flag active" data-lang="pt" title="Português">
            <img src="https://flagcdn.com/w40/de.png" class="flag" data-lang="de" title="Deutsch">
            <img src="https://flagcdn.com/w40/it.png" class="flag" data-lang="it" title="Italiano">
            <img src="https://flagcdn.com/w40/nl.png" class="flag" data-lang="nl" title="Nederlands">
        </div>
        <button class="btn btn-admin" id="admin-btn">
            <i class="fas fa-lock"></i> Admin
        </button>
    </div>
    
    <!-- SELEÇÃO DE MESA (OBRIGATÓRIA) -->
    <div class="table-selector">
        <h2 id="table-title">Selecione sua mesa para começar</h2>
        <div class="tables" id="tables-container">
            <!-- Mesas serão geradas por JavaScript -->
        </div>
    </div>
    
    <!-- CATEGORIAS -->
    <div class="categories" id="categories-tabs">
        <!-- Categorias serão geradas por JavaScript -->
    </div>
    
    <!-- PRODUTOS -->
    <div id="products-container" class="products">
        <!-- Produtos serão carregados por JavaScript -->
    </div>
    
    <!-- PEDIDO -->
    <div class="order-panel">
        <h2 id="order-title">Seu Pedido - Mesa: <span id="current-table">---</span></h2>
        <div class="order-items" id="order-items">
            <p id="empty-order">Seu pedido está vazio</p>
        </div>
        
        <div style="background: #f9f9f9; padding: 15px; border-radius: 8px; margin: 15px 0;">
            <div style="display: flex; justify-content: space-between;">
                <span id="subtotal-label">Subtotal:</span>
                <span id="subtotal">€0.00</span>
            </div>
            <div style="display: flex; justify-content: space-between; margin: 10px 0;">
                <span id="tax-label">IVA (10%):</span>
                <span id="tax">€0.00</span>
            </div>
            <div style="display: flex; justify-content: space-between; font-weight: bold; font-size: 18px;">
                <span id="total-label">Total:</span>
                <span id="total">€0.00</span>
            </div>
        </div>
        
        <!-- BOTÕES DE AÇÃO -->
        <div class="buttons">
            <button class="btn btn-save" id="save-btn">
                <i class="fas fa-save"></i> <span id="save-text">Guardar Pedido</span>
            </button>
            <button class="btn btn-print" id="print-btn">
                <i class="fas fa-print"></i> <span id="print-text">Imprimir Cozinha</span>
            </button>
            <button class="btn btn-whatsapp" id="whatsapp-btn">
                <i class="fab fa-whatsapp"></i> <span id="whatsapp-text">Enviar WhatsApp</span>
            </button>
            <button class="btn btn-clear" id="clear-btn">
                <i class="fas fa-trash"></i> <span id="clear-text">Limpar Pedido</span>
            </button>
        </div>
    </div>
    
    <!-- MODAL DE ADMINISTRAÇÃO -->
    <div class="modal" id="admin-modal">
        <div class="modal-content">
            <h2 id="admin-title">Acesso Administração</h2>
            <p id="admin-desc">Digite o código de acesso:</p>
            <input type="password" id="admin-code" style="width:100%; padding:12px; margin:15px 0; border:2px solid #ddd; border-radius:5px;" placeholder="Código (ex: 1234)">
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="btn" style="background:#95a5a6; flex:1;" id="cancel-admin">Cancelar</button>
                <button class="btn btn-admin" style="flex:1;" id="login-admin">Entrar</button>
            </div>
        </div>
    </div>
    
    <!-- MODAL PARA ADICIONAR PRODUTO -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <h2 id="product-modal-title">Adicionar Produto</h2>
            <input type="text" id="new-name" placeholder="Nome do produto" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd;">
            <input type="text" id="new-desc" placeholder="Descrição" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd;">
            <input type="number" id="new-price" placeholder="Preço (€)" step="0.01" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd;">
            <select id="new-category" style="width:100%; padding:10px; margin:10px 0; border:1px solid #ddd;">
                <option value="cocktails">Cocktails</option>
                <option value="bebidas">Bebidas</option>
                <option value="cafes">Cafés</option>
                <option value="comida">Comida</option>
            </select>
            <div style="display:flex; gap:10px; margin-top:20px;">
                <button class="btn" style="background:#95a5a6; flex:1;" id="cancel-product">Cancelar</button>
                <button class="btn btn-save" style="flex:1;" id="save-product">Guardar</button>
            </div>
        </div>
    </div>

    <script>
        // =============== CONFIGURAÇÃO ===============
        const ADMIN_CODE = "1234";
        let currentLang = 'pt';
        let currentTable = null;
        let order = [];
        let isAdmin = false;
        
        // =============== TRADUÇÕES ===============
        const translations = {
            pt: {
                "table-title": "Selecione sua mesa para começar",
                "order-title": "Seu Pedido - Mesa: ",
                "empty-order": "Seu pedido está vazio",
                "subtotal": "Subtotal:",
                "tax": "IVA (10%):",
                "total": "Total:",
                "save": "Guardar Pedido",
                "print": "Imprimir Cozinha",
                "whatsapp": "Enviar WhatsApp",
                "clear": "Limpar Pedido",
                "add": "Adicionar",
                "remove": "Remover",
                "admin-title": "Acesso Administração",
                "admin-desc": "Digite o código de acesso:",
                "cocktails": "Cocktails",
                "bebidas": "Bebidas",
                "cafes": "Cafés",
                "comida": "Comida",
                "sobremesas": "Sobremesas"
            },
            de: {
                "table-title": "Wählen Sie Ihren Tisch",
                "order-title": "Ihre Bestellung - Tisch: ",
                "empty-order": "Ihr Warenkorb ist leer",
                "subtotal": "Zwischensumme:",
                "tax": "MwSt (10%):",
                "total": "Gesamt:",
                "save": "Bestellung speichern",
                "print": "In Küche drucken",
                "whatsapp": "Per WhatsApp senden",
                "clear": "Bestellung löschen",
                "add": "Hinzufügen",
                "remove": "Entfernen",
                "admin-title": "Administratorzugang",
                "admin-desc": "Geben Sie den Zugangscode ein:",
                "cocktails": "Cocktails",
                "bebidas": "Getränke",
                "cafes": "Kaffee",
                "comida": "Essen",
                "sobremesas": "Desserts"
            },
            it: {
                "table-title": "Seleziona il tuo tavolo",
                "order-title": "Il Tuo Ordine - Tavolo: ",
                "empty-order": "Il tuo ordine è vuoto",
                "subtotal": "Subtotale:",
                "tax": "IVA (10%):",
                "total": "Totale:",
                "save": "Salva Ordine",
                "print": "Stampa in Cucina",
                "whatsapp": "Invia WhatsApp",
                "clear": "Cancella Ordine",
                "add": "Aggiungi",
                "remove": "Rimuovi",
                "admin-title": "Accesso Amministratore",
                "admin-desc": "Inserisci il codice di accesso:",
                "cocktails": "Cocktail",
                "bebidas": "Bevande",
                "cafes": "Caffè",
                "comida": "Cibo",
                "sobremesas": "Dessert"
            },
            nl: {
                "table-title": "Selecteer uw tafel",
                "order-title": "Uw Bestelling - Tafel: ",
                "empty-order": "Uw bestelling is leeg",
                "subtotal": "Subtotaal:",
                "tax": "BTW (10%):",
                "total": "Totaal:",
                "save": "Bestelling opslaan",
                "print": "Print in Keuken",
                "whatsapp": "Verstuur WhatsApp",
                "clear": "Bestelling wissen",
                "add": "Toevoegen",
                "remove": "Verwijderen",
                "admin-title": "Beheerderstoegang",
                "admin-desc": "Voer toegangscode in:",
                "cocktails": "Cocktails",
                "bebidas": "Dranken",
                "cafes": "Koffie",
                "comida": "Eten",
                "sobremesas": "Desserts"
            }
        };
        
        // =============== PRODUTOS ===============
        let products = [
            {id:1, name:'Mojito', desc:'Rum, hortelã, limão', price:8.50, cat:'cocktails'},
            {id:2, name:'Margarita', desc:'Tequila, Cointreau', price:9.00, cat:'cocktails'},
            {id:3, name:'Caipirinha', desc:'Cachaça, limão', price:7.50, cat:'cocktails'},
            {id:4, name:'Água Mineral', desc:'Garrafa 500ml', price:1.50, cat:'bebidas'},
            {id:5, name:'Coca-Cola', desc:'Lata 330ml', price:2.00, cat:'bebidas'},
            {id:6, name:'Vinho Tinto', desc:'Copo 150ml', price:3.50, cat:'bebidas'},
            {id:7, name:'Expresso', desc:'Café curto', price:1.00, cat:'cafes'},
            {id:8, name:'Cappuccino', desc:'Café com leite', price:2.50, cat:'cafes'},
            {id:9, name:'Hambúrguer', desc:'Carne, queijo', price:12.50, cat:'comida'},
            {id:10, name:'Pizza Margherita', desc:'Tomate, mussarela', price:10.00, cat:'comida'}
        ];
        
        // =============== INICIALIZAÇÃO ===============
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
        });
        
        function initApp() {
            // Configurar bandeiras
            document.querySelectorAll('.flag').forEach(flag => {
                flag.addEventListener('click', function() {
                    setLanguage(this.dataset.lang);
                    document.querySelectorAll('.flag').forEach(f => f.classList.remove('active'));
                    this.classList.add('active');
                });
            });
            
            // Criar mesas (1-20)
            const tablesContainer = document.getElementById('tables-container');
            for(let i = 1; i <= 20; i++) {
                const table = document.createElement('div');
                table.className = 'table';
                if(Math.random() > 0.7) table.classList.add('occupied');
                table.textContent = i;
                table.addEventListener('click', function() {
                    if(this.classList.contains('occupied')) {
                        alert('Mesa ocupada!');
                        return;
                    }
                    document.querySelectorAll('.table').forEach(t => t.classList.remove('selected'));
                    this.classList.add('selected');
                    currentTable = i;
                    document.getElementById('current-table').textContent = i;
                    loadOrder();
                });
                tablesContainer.appendChild(table);
            }
            
            // Carregar categorias
            loadCategories();
            
            // Carregar produtos
            loadProducts();
            
            // Configurar botões
            setupButtons();
        }
        
        // =============== IDIOMAS ===============
        function setLanguage(lang) {
            currentLang = lang;
            const t = translations[lang];
            
            // Atualizar textos
            document.getElementById('table-title').textContent = t['table-title'];
            document.getElementById('empty-order').textContent = t['empty-order'];
            document.getElementById('subtotal-label').textContent = t['subtotal'];
            document.getElementById('tax-label').textContent = t['tax'];
            document.getElementById('total-label').textContent = t['total'];
            document.getElementById('save-text').textContent = t['save'];
            document.getElementById('print-text').textContent = t['print'];
            document.getElementById('whatsapp-text').textContent = t['whatsapp'];
            document.getElementById('clear-text').textContent = t['clear'];
            document.getElementById('admin-title').textContent = t['admin-title'];
            document.getElementById('admin-desc').textContent = t['admin-desc'];
            
            // Atualizar título do pedido
            document.getElementById('order-title').innerHTML = t['order-title'] + '<span id="current-table">' + (currentTable || '---') + '</span>';
            
            // Recarregar categorias e produtos com nova língua
            loadCategories();
            loadProducts();
            updateOrderDisplay();
        }
        
        // =============== CATEGORIAS ===============
        function loadCategories() {
            const tabs = document.getElementById('categories-tabs');
            const t = translations[currentLang];
            const categories = ['cocktails', 'bebidas', 'cafes', 'comida', 'sobremesas'];
            
            tabs.innerHTML = '';
            categories.forEach((cat, index) => {
                const tab = document.createElement('div');
                tab.className = 'category-tab' + (index === 0 ? ' active' : '');
                tab.textContent = t[cat];
                tab.dataset.category = cat;
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    filterProducts(cat);
                });
                tabs.appendChild(tab);
            });
        }
        
        function filterProducts(category) {
            const filtered = category === 'all' ? products : products.filter(p => p.cat === category);
            renderProducts(filtered);
        }
        
        // =============== PRODUTOS ===============
        function loadProducts() {
            renderProducts(products);
        }
        
        function renderProducts(productsList) {
            const container = document.getElementById('products-container');
            const t = translations[currentLang];
            
            container.innerHTML = '';
            productsList.forEach(product => {
                const div = document.createElement('div');
                div.className = 'product';
                div.innerHTML = `
                    <div class="product-name">${product.name}</div>
                    <div class="product-desc">${product.desc}</div>
                    <div class="product-footer">
                        <div class="price">€${product.price.toFixed(2)}</div>
                        <button class="add-btn" data-id="${product.id}">
                            <i class="fas fa-plus"></i> ${t['add']}
                        </button>
                    </div>
                `;
                container.appendChild(div);
            });
            
            // Adicionar event listeners
            document.querySelectorAll('.add-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    if(!currentTable) {
                        alert('Selecione uma mesa primeiro!');
                        return;
                    }
                    const id = parseInt(this.dataset.id);
                    addToOrder(id);
                });
            });
        }
        
        // =============== PEDIDOS ===============
        function addToOrder(productId) {
            const product = products.find(p => p.id === productId);
            if(!product) return;
            
            const existing = order.find(item => item.id === productId);
            if(existing) {
                existing.quantity++;
            } else {
                order.push({
                    id: product.id,
                    name: product.name,
                    price: product.price,
                    quantity: 1
                });
            }
            
            updateOrderDisplay();
            saveOrder();
        }
        
        function updateOrderDisplay() {
            const container = document.getElementById('order-items');
            const t = translations[currentLang];
            
            if(order.length === 0) {
                container.innerHTML = `<p id="empty-order">${t['empty-order']}</p>`;
            } else {
                let html = '';
                order.forEach(item => {
                    html += `
                        <div class="order-item">
                            <div>
                                <strong>${item.name}</strong><br>
                                <small>€${item.price.toFixed(2)} cada</small>
                            </div>
                            <div class="item-controls">
                                <button class="qty-btn minus" data-id="${item.id}">-</button>
                                <span>${item.quantity}</span>
                                <button class="qty-btn plus" data-id="${item.id}">+</button>
                                <button style="background:#e74c3c; color:white; border:none; padding:5px 10px; border-radius:3px; cursor:pointer;" data-id="${item.id}" class="remove">
                                    ${t['remove']}
                                </button>
                            </div>
                        </div>
                    `;
                });
                container.innerHTML = html;
                
                // Adicionar eventos
                document.querySelectorAll('.minus').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.dataset.id);
                        updateQuantity(id, -1);
                    });
                });
                
                document.querySelectorAll('.plus').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.dataset.id);
                        updateQuantity(id, 1);
                    });
                });
                
                document.querySelectorAll('.remove').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const id = parseInt(this.dataset.id);
                        order = order.filter(item => item.id !== id);
                        updateOrderDisplay();
                        saveOrder();
                    });
                });
            }
            
            // Calcular totais
            const subtotal = order.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * 0.10;
            const total = subtotal + tax;
            
            document.getElementById('subtotal').textContent = '€' + subtotal.toFixed(2);
            document.getElementById('tax').textContent = '€' + tax.toFixed(2);
            document.getElementById('total').textContent = '€' + total.toFixed(2);
        }
        
        function updateQuantity(productId, change) {
            const item = order.find(item => item.id === productId);
            if(item) {
                item.quantity += change;
                if(item.quantity <= 0) {
                    order = order.filter(item => item.id !== productId);
                }
                updateOrderDisplay();
                saveOrder();
            }
        }
        
        function saveOrder() {
            if(currentTable) {
                localStorage.setItem(`order_table_${currentTable}`, JSON.stringify(order));
            }
        }
        
        function loadOrder() {
            if(currentTable) {
                const saved = localStorage.getItem(`order_table_${currentTable}`);
                order = saved ? JSON.parse(saved) : [];
                updateOrderDisplay();
            }
        }
        
        // =============== BOTÕES ===============
        function setupButtons() {
            // Admin
            document.getElementById('admin-btn').addEventListener('click', function() {
                document.getElementById('admin-modal').style.display = 'flex';
                document.getElementById('admin-code').focus();
            });
            
            document.getElementById('cancel-admin').addEventListener('click', function() {
                document.getElementById('admin-modal').style.display = 'none';
                document.getElementById('admin-code').value = '';
            });
            
            document.getElementById('login-admin').addEventListener('click', function() {
                const code = document.getElementById('admin-code').value;
                if(code === ADMIN_CODE) {
                    isAdmin = true;
                    alert('Modo administração ativado!');
                    document.getElementById('admin-modal').style.display = 'none';
                    
                    // Adicionar botão para adicionar produtos
                    const adminBtn = document.createElement('button');
                    adminBtn.className = 'btn btn-admin';
                    adminBtn.innerHTML = '<i class="fas fa-plus"></i> Adicionar Produto';
                    adminBtn.style.marginTop = '10px';
                    adminBtn.addEventListener('click', function() {
                        document.getElementById('product-modal').style.display = 'flex';
                    });
                    document.querySelector('.buttons').appendChild(adminBtn);
                    
                } else {
                    alert('Código incorreto!');
                }
                document.getElementById('admin-code').value = '';
            });
            
            // Produto
            document.getElementById('cancel-product').addEventListener('click', function() {
                document.getElementById('product-modal').style.display = 'none';
            });
            
            document.getElementById('save-product').addEventListener('click', function() {
                const name = document.getElementById('new-name').value;
                const desc = document.getElementById('new-desc').value;
                const price = parseFloat(document.getElementById('new-price').value);
                const category = document.getElementById('new-category').value;
                
                if(name && desc && price > 0) {
                    const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                    products.push({
                        id: newId,
                        name: name,
                        desc: desc,
                        price: price,
                        cat: category
                    });
                    
                    document.getElementById('new-name').value = '';
                    document.getElementById('new-desc').value = '';
                    document.getElementById('new-price').value = '';
                    document.getElementById('product-modal').style.display = 'none';
                    
                    loadProducts();
                    alert('Produto adicionado com sucesso!');
                } else {
                    alert('Preencha todos os campos corretamente!');
                }
            });
            
            // Ações do pedido
            document.getElementById('save-btn').addEventListener('click', function() {
                if(!currentTable) {
                    alert('Selecione uma mesa primeiro!');
                    return;
                }
                saveOrder();
                alert('Pedido guardado com sucesso!');
            });
            
            document.getElementById('print-btn').addEventListener('click', function() {
                if(!currentTable) {
                    alert('Selecione uma mesa primeiro!');
                    return;
                }
                if(order.length === 0) {
                    alert('Adicione itens ao pedido!');
                    return;
                }
                alert('Pedido enviado para impressão na cozinha!');
            });
            
            document.getElementById('whatsapp-btn').addEventListener('click', function() {
                if(!currentTable) {
                    alert('Selecione uma mesa primeiro!');
                    return;
                }
                if(order.length === 0) {
                    alert('Adicione itens ao pedido!');
                    return;
                }
                
                let message = `*PEDIDO - MESA ${currentTable}*%0A%0A`;
                order.forEach(item => {
                    message += `${item.quantity}x ${item.name} - €${(item.price * item.quantity).toFixed(2)}%0A`;
                });
                
                const subtotal = order.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const tax = subtotal * 0.10;
                const total = subtotal + tax;
                
                message += `%0ASubtotal: €${subtotal.toFixed(2)}%0A`;
                message += `IVA: €${tax.toFixed(2)}%0A`;
                message += `*Total: €${total.toFixed(2)}*%0A%0A`;
                message += `SANREMO - ${new Date().toLocaleString()}`;
                
                window.open(`https://wa.me/?text=${message}`, '_blank');
            });
            
            document.getElementById('clear-btn').addEventListener('click', function() {
                if(order.length === 0) return;
                if(confirm('Tem certeza que deseja limpar o pedido?')) {
                    order = [];
                    updateOrderDisplay();
                    saveOrder();
                }
            });
            
            // Fechar modais
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if(e.target === this) {
                        this.style.display = 'none';
                    }
                });
            });
        }
    </script>
</body>
</html>
